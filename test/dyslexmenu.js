/*
DONT USE ANY ` IN THE CODE
*/


// skidded from a nuked Nullify clone

// gets webpack require and hooks the module ytl which is the platform connector for math and runs component.complete

  function skipMath() {
    html5Iframe.contentWindow.webpackChunkdigit_math.push([[String(Math.random())], {}, (x) => x])("ytl").vWc.h2L.component.complete(parseInt(prompt("score?")));
    };

// gets webpack require and hooks the module $aK which is the platform connector and runs component.complete
 function skipReading() {
    html5Iframe.contentWindow.webpackChunkreading_comp.push([[String(Math.random())], {}, (x) => x])("$aK").lm5.dX3.component.complete(parseInt(prompt("score?")));
  };
  
  
  //UI
  const div = document.createElement("div");
  div.id = "GUI";
  div.className = "GUI";
  div.style.position = "fixed";
  div.style.top = "475px";
  div.style.left = "381px";
  div.style.transform = "translate(-50%, -50%)";
  div.style.outline = "gray solid 2px";
  div.style.height = "260px";
  div.style.width = "150px";
  div.style.opacity = "0.85";
  div.style.fontFamily = "sans-serif";
  div.style.background = "black";
  div.style.borderRadius = "5px";
  div.style.display = "grid";
  div.style.placeItems = "center";
  div.style.color = "white";
  div.style.fontSize = "larger";
  div.style.zIndex = "99999";
  div.style.cursor = "move";

  // old nullify logo :)
  const img = document.createElement("img");
  img.id = "nullicon";
  img.className = "center";
  img.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABwElEQVRIDeWVIU8DMRTHK3AoHIoPAP7W11ZcsmWIYRBDXF83g8GS8AVQKNQUHr4Ahi+AQqEnSRbMgkKAOfJf2kszupUjWULCkua6693/9/7v9V6FyPyGw+GutbZyzt0y86tzbmqtnTBzWZblVub19PJ4PD5g5ktmfmLmD+dcnRrM/AYwAhgMBjtpNSFEv9/fRkSIDBGmxHL3EIi19qGqqjO4bmCge+vJKHPCq9aZ+bmqqkNBRF0Q8cfnGbZ/BfOBLlLW6/X2pJQagJqIZlrrCWAhXcx8nUsXahDSgrqh6BBVSl0ppabGmDoAAFkMpdSLlPImwPDiaDS6QMHhDNaxAeAYwUAUz8aiEA7jGyCA/HUew8JOCaJwjYCCWOqaAzTOiAgw7VOwVjQGtQHUUsoTIjqOBXLzPwno5qKO11s5QHqwY2KB3PyfAYqiONp0igoiKnJ5j9eFUupz6euNP67leSsAtNsWuRUATgCYbcoB2sviNEMLkFLe/yBdWQfQMMY8aq1PQ3NsTjd/SJyjl6dcdTqdfYy4iGGOroqWjfVGcNUkHBy+Vc8DLAF4N8bcYevinVV6a+/jUAkpjADpFCSUvgAt/jwG+R30nQAAAA5lWElmTU0AKgAAAAgAAAAAAAAA0lOTAAAAAElFTkSuQmCC';
  div.appendChild(img);
  
  const h1 = document.createElement("h1");
  h1.className = "title";
  h1.innerHTML = "<center>Nullify</center>";
  div.appendChild(h1);
  
  const skipReadinglol = document.createElement("button");
  skipReadinglol.id = "skip-reading-button";
  skipReadinglol.className = "button";
  skipReadinglol.innerHTML = "Skip Reading";
  div.appendChild(skipReadinglol);
  
  const skipMathlol = document.createElement("button");
  skipMathlol.id = "skip-math-button";
  skipMathlol.className = "button";
  skipMathlol.innerHTML = "Skip Math";
  div.appendChild(skipMathlol);
  
  const discordButton = document.createElement("button");
  discordButton.id = "discord";
  discordButton.className = "button";
  discordButton.innerHTML = "Discord";
  div.appendChild(discordButton);
  
  const gamesButton = document.createElement("button");
  gamesButton.id = "free-games";
  gamesButton.className = "button";
  gamesButton.innerHTML = "Free Games";
  div.appendChild(gamesButton);
  
  
  const style = document.createElement("style");
  style.id = "bruh";
  style.innerHTML = `
  
    .title {
      font-family: 'Nunito', sans-serif;
      font-size: 30px;
      color: white;
    }
      
    .button {
      font-family: 'Nunito', sans-serif;
      border: none;
      border-radius: 5px;
      color: white;
      text-align: center;
      font-size: 16px;
      cursor: pointer;
      transition-duration: 0.4s;
      width: 100%;
      text-align: center;
      color: white; 
      background-color: black;
    }
      
    .button:hover {
      color: black;
      background-color: grey;
    }
      
    .button:active {
      background-color: black;
    }
  
    .center {
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
  `;
  div.appendChild(style);
  
  document.body.appendChild(div);
  
  // Make the GUI draggable
  let isDragging = false;
  let mouseOffsetX = 0;
  let mouseOffsetY = 0;
  
  div.addEventListener('mousedown', (event) => {
    isDragging = true;
    mouseOffsetX = event.clientX - div.offsetLeft;
    mouseOffsetY = event.clientY - div.offsetTop;
  });
  
  div.addEventListener('mouseup', () => {
    isDragging = false;
  });
  
  div.addEventListener('mousemove', (event) => {
    if (isDragging) {
      div.style.left = (event.clientX - mouseOffsetX) + 'px';
      div.style.top = (event.clientY - mouseOffsetY) + 'px';
    }
  });
  
  window.document.getElementById("skip-math-button").addEventListener("click", ()=> {
    skipMath()
  })
  window.document.getElementById("skip-reading-button").addEventListener("click", ()=> {
    skipReading()
  })
  
  
  window.document.getElementById("discord").addEventListener("click", ()=> {   
    window.open('https://discord.gg/eTpFvdmS6v', '_blank');
  })
  
  // free games is ez af to do
  window.document.getElementById("free-games").addEventListener("click", ()=> {   
    window.open('https://docs.google.com/document/d/1mIUizC8j1cbckR0IE57M4IDo_-b2OFwf7VlNglM0K1A/edit', '_blank');
  })
  
  var galaxy = document.createElement("div");
      (galaxy.style.cssText =
        "position: fixed; bottom: 10px; width: 100%; color: white; font-size: 12px; text-align: center;"),
        (nullify.textContent = "galaxy on top | since 2024"),
        document.body.appendChild(galaxy)
  
        let uiVisible = true;

      window.addEventListener("keydown", (event) => {
        if (event.code === "ShiftRight") {
          if (uiVisible) {
            div.style.display = "none";
          } else {
            div.style.display = "grid";
          }
          uiVisible = !uiVisible;
        }
      });
